<div id="back_link">&laquo;&nbsp;<a href="javascript:load_content('docs')">Back to Documentation</a></div>

<h1>Singularity Shell</h1>
<br/>
<h2>Usage</h2>
<p>
The 'shell' Singularity sub-command will automatically spawn a shell within a
container. The default and the only requirement of any Singularity container is
that /bin/sh must be present, and thus /bin/sh is also used as the default
shell.
</p>
<p>
The usage is as follows:
<pre class="padPre text-justify">
$ singularity shell
USAGE: singularity (options) shell [container image] (options)
</pre>
</p>
<p>
Additionally any arguments passed to the Singularity command (after the
container name) will be passed to the called shell within the container.
</p>

<h2>Options</h2>
<p>
The shell sub-command allows you to set or change the default shell which is
used by using the --shell argument. As of Singularity version 2.2, you can
also use the environment variable SINGULARITY_SHELL which will use that as
your shell <i>entry point</i> into the container.
</p>

<h2>Notes about dot files</h2>
<p>
Some shells (e.g. /bin/bash) will automatically try to execute the user's
dot files and system login scripts. This carries with it several caveats
that must be noted:
<ol>
<li>
Singularity automatically tries to set the prompt (PS1 environment
variable) to something related to the container, but many cases the dot
files override this and reset the prompt.
</li>
<li>
Custom commands inside a user's dot file maybe parsed and executed when
the container is called (a common example of this is environment modules)
and that may lead to errors or unexpected behaviors when spawning a shell
inside a container.
</li>
</ol>
For these reasons (and if you experience issues like this) you may want to
consider also telling the shell inside the container not to parse dot files
and login scripts. Read the documentation on your desired shell (for Bash
check into <b>--norc</b> and <b>--noprofile</b>).
</p>

<h2>Examples</h2>
<pre class="padPre text-justify">
$ singularity shell container.img 
Singularity/container.img&gt; echo $SHELL
/bin/sh
Singularity/container.img&gt; exit
$ 
</pre>
<pre class="padPre text-justify">
$ singularity shell container.img --help
GNU bash, version 4.3.30(1)-release-(x86_64-pc-linux-gnu)
Usage:  /bin/sh [GNU long option] [option] ...
        /bin/sh [GNU long option] [option] script-file ...
GNU long options:
        --debug
        --debugger
        --dump-po-strings
        --dump-strings
        --help
        --init-file
        --login
        --noediting
        --noprofile
        --norc
        --posix
        --rcfile
        --restricted
        --verbose
        --version
Shell options:
        -ilrsD or -c command or -O shopt_option         (invocation only)
        -abefhkmnptuvxBCHP or -o option
Type `/bin/sh -c "help set"' for more information about shell options.
Type `/bin/sh -c help' for more information about shell built in commands.
Use the `bashbug' command to report bugs.
$ 
</pre>
And thus we should be able to do:
<pre class="padPre text-justify">
$ singularity shell container.img -c "echo hello world"
hello world
$ 
</pre>
</p>
