# This will be sourced before launching a Singularity container.
# Any variables prefixed with "SINGULARITYENV_" will be transposed
# properly into the container. For example:
# SINGULARITYENV_LD_LIBRARY_PATH -> LD_LIBRARY_PATH

# Environment modules if set, cause errors in containers
unset module
unset ml

# Bash env has been known to cause issues in containers
unset BASH_ENV

# This var is provided to the user as a convenience.  It will be prepneded to 
# path via /.singularity.d/env/11-user_defined_SINGULARITYENV_PATH.sh at 
# runtime
if [ -n "${SINGULARITYENV_PATH:-}" ]; then 
    SINGULARITY_USER_DEFINED_PREPEND="$SINGULARITYENV_PATH"
    export SINGULARITY_USER_DEFINED_PREPEND
fi 

# Provide a sane path within the container (unfortunately the same var name is
# recycled from above for legacy reasons
SINGULARITYENV_PATH="/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin"

# Don't save the shell's HISTFILE
SINGULARITYENV_HISTFILE=""

export SINGULARITYENV_PATH SINGULARITYENV_HISTFILE
