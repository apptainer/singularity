#!/singularity/test
# test from docker registry

source common.func
source docker/docker.func

check-command docker

atexit() {
    delete-registry
}

register-exit-func atexit

prepare-registry

# local registry without https setup
export SINGULARITY_NOHTTPS=1

build-from-definition       "BusyboxLocal"                  docker/testdata/busybox_local.def
build-from-definition       "BusyboxLocalRegistry"          docker/testdata/busybox_local_registry.def
fail-build-from-definition  "BusyboxLocalRegistryNamespace" docker/testdata/busybox_local_registry_namespace.def